<dashboard-layout>
  <!-- Header -->
  <header class="flex items-center justify-between p-6 ">
    <div class="flex items-center gap-3">
      @let userData = user();
      @if (userData) {
      <user-avatar />
      <h1 class="text-xl text-white">Hi, {{userData.name}}!</h1>
      }
    </div>
    <div class="flex gap-4">
      <a href="javascript:void(0);" class="rounded-full border border-white/90 p-2 text-white" (click)="signOut()">
        <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
          <path fill="currentColor"
            d="M5.616 20q-.691 0-1.153-.462T4 18.384V5.616q0-.691.463-1.153T5.616 4h6.403v1H5.616q-.231 0-.424.192T5 5.616v12.769q0 .23.192.423t.423.192h6.404v1zm10.846-4.461l-.702-.72l2.319-2.319H9.192v-1h8.887l-2.32-2.32l.702-.718L20 12z">
          </path>
        </svg>
      </a>
    </div>
  </header>

  @let selectedTab = tab();
  <nav
    class="mb-8 flex items-center justify-between sticky top-0  backdrop-blur-xs bg-[#000033]/20 px-6 pt-1 shadow-2xl border-b-1">

    <ul class="flex items-center gap-2 text-sm leading-none text-quaternary">
      <li class="font-medium p-2" [class.active]="selectedTab !== 'balance'">
        <a href="javascript:void(0);" (click)="changeTab('balance')" [class.opacity-100]="selectedTab === 'balance'"
          [class.opacity-50]="selectedTab !== 'balance'" class="tab transition-opacity">My Balance </a>
      </li>
      <li class="font-medium p-2" [class.active]="selectedTab !== 'income'">


        <a href="javascript:void(0);" (click)="changeTab('income')" [class.opacity-100]="selectedTab === 'income'"
          [class.opacity-50]="selectedTab !== 'income'" class="tab transition-opacity">Incoming Bills </a>
      </li>
      <li class="font-medium p-2" [class.active]="selectedTab !== 'transactions'">

        <a href="javascript:void(0);" (click)="changeTab('transactions')"
          [class.opacity-100]="selectedTab === 'transactions'" [class.opacity-50]="selectedTab !== 'transactions'"
          class="tab transition-opacity">Transactions </a>
      </li>
    </ul>
    <money-selector />
  </nav>

  <div class="tabs px-6 ">
    <div id="balance" class="transition-all h-full" [class]="tab() === 'balance' ? 'block fade-in' : 'hidden'">
      <my-balance [data]="balance()" [transactions]="transactions()" [incomes]="incomes()" (refresh)="refreshData()" />
    </div>
    <div id="income" class="px-0" [class]="tab() === 'income' ? 'block fade-in' : 'hidden'">
      <incoming-bills [incomes]="incomes()" />
    </div>
    <div id="transactions" class="px-0" [class]="tab() === 'transactions' ? 'block fade-in' : 'hidden'">
      @defer {
      <transactions [transactions]="transactions()" />
      } @placeholder {
      <fallback />
      }
    </div>
  </div>

</dashboard-layout>